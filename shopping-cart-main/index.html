<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gear Galaxy</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
</head>

<body>
    <div class="video-container">
        <video autoplay loop muted>
            <source src="assets/28660-370964594.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    <header>
        <div class="nav container">
            <a href="#" class="logo">Gear Galaxy</a>
            <!-- <nav> -->
                <a href="compare.html" class="nav-link">Compare</a>
                <a href="review.html" class="nav-link">Reviews</a>
                <i class="bx bx-shopping-bag" id="cart-icon">Cart</i>
                <a href="Login page.html" class="nav-link">Login</a>
            <!-- </nav> -->
            
            <div class="cart">
                <h2 class="cart-title">Your Cart</h2>
                <div class="cart-content">
                </div>
                <div class="total">
                    <div class="total-title">Total</div>
                    <div class="total-price">₹0</div>
                </div>
                <button type="button" class="btn-buy" id="buy-now-button">Buy Now</button>
                <button class="bx bx-x" id="close-cart"></button>
            </div>
        </div>
    </header>
    <section class="shop container">
        <h2 class="section-title">Products</h2>
        <div class="shop-content">
            <!-- Product Grid -->
            <div class="row">
                <!-- Product 1 -->
                <div class="col-md-4">
                    <div class="card">
                        <img 
                        src="product photo/Samsung-Galaxy-S23.jpg" 
                        alt="Samsung Galaxy S23" 
                        class="card-img-top" 
                        style="width: 200px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S23</h2>
                            <span class="price">₹55000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>
                        </div>
                    </div>
                </div>
                <!-- Product 2 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/Samsung Galaxy S23 fe.jpg" alt="Samsung Galaxy S23FE" class="card-img-top" style="width: 245px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S23FE</h2>
                            <span class="price">₹60000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>   
                        </div>
                    </div>
                </div>
                <!-- Product 3 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/SamsungGalaxyS23Ultra.jpg.webp" alt="SamsungGalaxyS23Ultra" class="card-img-top" style="width: 245px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S23Ultra</h2>
                            <span class="price">₹85000</span>
                            <i class="bx bx-shopping-bag add-cart"></i> </div>
                    </div>
                </div>
                <!-- Product 4 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/S24.jpeg" alt="Samsung Galaxy S24" class="card-img-top" style="width: 320px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S24</h2>
                            <span class="price">₹65000</span>
                            <i class="bx bx-shopping-bag add-cart"></i> </div>
                    </div>
                </div>
                <!-- Product 5 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/S24+.png.webp" alt="Samsung Galaxy S24+" class="card-img-top" style="width: 255px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S24+</h2>
                            <span class="price">₹80000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>  </div>
                    </div>
                </div>
                <!-- Product 6 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/S24 Ultra.jpg" alt="Samsung Galaxy S24 Ultra" class="card-img-top" style="width: 255px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy S24Ultra</h2>
                            <span class="price">₹110000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>  </div>
                    </div>
                </div>
                <!-- Product 7 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/CGG_Samsung_Galaxy_M51.jpg" alt="Samsung Galaxy M51" class="card-img-top" style="width: 275px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy M51</h2>
                            <span class="price">₹50000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>  </div>
                    </div>
                </div>
                <!-- Product 8 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/m35.jpeg" alt="Samsung Galaxy M35" class="card-img-top" style="width: 340px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy M35</h2>
                            <span class="price">₹45000</span>
                            <i class="bx bx-shopping-bag add-cart"></i> </div>
                    </div>
                </div>
                <!-- Product 9 -->
                <div class="col-md-4">
                    <div class="card">
                        <img src="product photo/Samsung-Galaxy-M15-5G.jpg.webp" alt="Samsung Galaxy M15" class="card-img-top" style="width: 240px; height: auto;align-self:center;">
                        <div class="card-body">
                            <h2 class="card-title">Samsung Galaxy M15</h2>
                            <span class="price">₹35000</span>
                            <i class="bx bx-shopping-bag add-cart"></i>  </div>
                    </div>
                </div>
            </div>
        </div>
        <script> 
              const cartIcon = document.querySelector('#cart-icon');
        const cart = document.querySelector('.cart');
        const closeCart = document.querySelector('#close-cart');
        const cartContent = document.querySelector('.cart-content');
        let totalPrice = 0;

        cartIcon.addEventListener('click', () => cart.classList.add('active'));
        closeCart.addEventListener('click', () => cart.classList.remove('active'));

        const initCartFunctions = () => {
            document.querySelectorAll('.cart-remove').forEach((button) => {
                button.addEventListener('click', removeCartItem);
            });

            document.querySelectorAll('.cart-quantity').forEach((input) => {
                input.addEventListener('change', quantityChanged);
            });

            document.querySelectorAll('.add-cart').forEach((button) => {
                button.addEventListener('click', addCartClicked);
            });

            document.querySelector('.btn-buy').addEventListener('click', buyButtonClicked);
        };

        initCartFunctions();

        function buyButtonClicked() {
    const cartContent = document.querySelector('.cart-content');
    const cartItems = cartContent.querySelectorAll('.cart-box');
    if (cartItems.length === 0) {
        alert('Your cart is empty');
    } else {
        while (cartContent.firstChild) {
            cartContent.removeChild(cartContent.firstChild);
        }
        document.querySelector('.total-price').innerText = '₹0';
        cart.classList.remove('active'); // Properly close the cart
        window.location.href = 'address.html'; // Redirect to address page
    }
}


        function removeCartItem(event) {
            event.target.parentElement.remove();
            updateTotalPrice();
            if (cartContent.children.length === 0) {
                closeCart();
            }
        }

        function quantityChanged(event) {
            const input = event.target;
            if (isNaN(input.value) || input.value <= 0) {
                input.value = 1;
            }
            updateTotalPrice();
        }

        let isAddingToCart = false;

        function addCartClicked(event) {
            isAddingToCart = true;
            const button = event.target;
            const shopProducts = button.closest('.card');
            const title = shopProducts.querySelector('.card-title').innerText;
            const price = shopProducts.querySelector('.price').innerText;
            const productImg = shopProducts.querySelector('.card-img-top').src;
            addProductToCart(title, price, productImg);
            updateTotalPrice();
            setTimeout(() => (isAddingToCart = false), 100);
        }

        function addProductToCart(title, price, productImg) {
            const cartItems = document.querySelector('.cart-content');
            const cartItemNames = cartItems.querySelectorAll('.cart-product-title');

            if (Array.from(cartItemNames).some((itemName) => itemName.innerText === title)) {
                alert('This item is already in your cart');
                return;
            }

            const cartShopBox = document.createElement('div');
            cartShopBox.classList.add('cart-box');
            cartShopBox.innerHTML = `
                <img src="${productImg}" alt="${title}" class="cart-img">
                <div class="detail-box">
                    <div class="cart-product-title">${title}</div>
                    <div class="cart-price">${price}</div>
                    <input type="number" value="1" class="cart-quantity">
                </div>
                <i class="bx bxs-trash-alt cart-remove"></i>`;
            cartItems.append(cartShopBox);

            cartShopBox.querySelector('.cart-remove').addEventListener('click', removeCartItem);
            cartShopBox.querySelector('.cart-quantity').addEventListener('change', quantityChanged);

            cart.classList.add('active');
        }

        function updateTotalPrice() {
            const cartContent = document.querySelector('.cart-content');
            const cartBoxes = cartContent.querySelectorAll('.cart-box');
            let total = 0;
            cartBoxes.forEach((cartBox) => {
                const priceElement = cartBox.querySelector('.cart-price');
                const quantityElement = cartBox.querySelector('.cart-quantity');
                let price = parseFloat(priceElement.innerText.replace('₹', '').replace(',', '.'));
                let quantity = parseInt(quantityElement.value);
                total += price * quantity;
            });

            document.querySelector('.total-price').innerText = `₹${total.toFixed(2)}`;
        }

        document.addEventListener('click', (event) => {
            if (!cart.contains(event.target) && !cartIcon.contains(event.target) && !isAddingToCart && cart.classList.contains('active')) {
                cart.classList.remove('active');
            }
        });
        </script>
</body>
</html>
